@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@{


    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.13/css/jquery.dataTables.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.js"></script>

    <script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/select/1.2.1/js/dataTables.select.min.js"></script>
    <script src="https://cdn.datatables.net/select/1.2.1/css/select.dataTables.min.css"></script>
    <script src="https://cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css"></script>
    <script src="https://editor.datatables.net/extensions/Editor/js/dataTables.editor.min.js"></script>
    <script src="https://editor.datatables.net/extensions/Editor/css/editor.dataTables.min.css"></script>
            }
@*<style>
    .table_container{
        width:49%;
        height:49%;
        border:solid 1px;
       display:inline-block;
    }
</style>*@

<div id="tbl1" class="table_container">
    
</div>
<table id="example" class="display" style="width:100%"></table>

<div class="modal"><!-- Place at bottom of page --></div>

@*<script>

    function format(d) {
        return 'Full name: ' + d.user_name +  '<br>' +
            'Color: ' + d.color + '<br>' +
            'The child row can contain any data you wish, including links, images, inner tables etc.';
    }


    $(document).ready(function () {

      

        $('#example').DataTable({

            ajax: "/users",


            columns: [
                {
                    className: "details-control",
                    orderable: false,
                    data: null,
                    defaultContent: ""
                },
                
                {
                    data: "id",
                    defaultContent: '',
                    
                    orderable: false,
                    render: function (data, type, full, meta){
                        return '<input type="checkbox" value="' 
                           + $('<div/>').text(data).html() + '">';
                    },
                    width:"1%"
                },

                
                
               // { data: 'id', "title": "Id" },
                { data: 'user_name', "title": "Name" },
                {
                    data: 'pwd', "title": "Password", "render": function (data, type, full, meta) {
                        return $('<a>')
                      .attr('href', 'https://www.google.co.in')
                      .text(data)
                      .wrap('<div></div>')
                      .parent()
                      .html();
                    },
                },
            ],

           

            fnRowCallback: function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {

                if (aData.color != null || aData.color != "") {
                    $(nRow).css('background-color', '#' + aData.color);
                }

            }


        });

        var detailRows = [];

        $('#example tbody').on('click', 'tr td.details-control', function () {
           
            var tr = $(this).closest('tr'); 
            var row = $('#example').DataTable().row(tr); //alert(row.data().id);
            var idx = $.inArray(tr.attr('id'), detailRows);

            if (row.child.isShown()) {
                tr.removeClass('details');
                row.child.hide();

                // Remove from the 'open' array
                detailRows.splice(idx, 1);
            }
            else {
                tr.addClass('details');
                row.child(format(row.data())).show();

                // Add to the 'open' array
                if (idx === -1) {
                    detailRows.push(tr.attr('id'));
                }
            }
        });

         //On each draw, loop over the `detailRows` array and show any child rows
        $('#example').DataTable().on('draw', function () {
            $.each(detailRows, function (i, id) {
                //alert(id);
                $('#' + id + ' td.details-control').trigger('click');
            });
        });
        var ID=[];
        $('#example ').on('click', 'input[type="checkbox"]', function () {
            alert(id);
            var trElem = $(this).closest("tr");// grabs the button's parent tr element
            var row = $('#example').DataTable().row(tr);
            alert(row.data().id);

        });



    });


</script>*@

@*<style>
    td.details-control {
    :  url('http://cdn.mysitemyway.com/etc-mysitemyway/icons/legacy-previews/icons-256/simple-black-square-icons-alphanumeric/126293-simple-black-square-icon-alphanumeric-plus-sign-simple.png') no-repeat center center;
    cursor: pointer;
}
tr.details td.details-control {
    background: url('http://findicons.com/files/icons/2583/sweetieplus/24/badge_square_minus_24_ns.png') no-repeat center center;
}
</style>*@
<script>
    $(document).ready(function () {
        var cols = [];
        $.get("/views/64?format=json",
            function (data) {
                alert(data.data);
                if (data != null) {
                    $.each(data.data.columns, function (i, value) { cols.push({ "data": value.columnIndex, "title": value.columnName }); });
                    $('#example').dataTable({
                        data: data.data.rows,
                        columns: cols,
                        searching: true,
                    });
                }
        })
    });
</script>
