@using ServiceStack;
@using ExpressBase.Objects;
@using ExpressBase.Common;

@{
    string html = string.Empty;

    var id = Convert.ToInt32(ViewBag.FormId);

    IServiceClient client = new JsonServiceClient("http://localhost:53125/").WithCache();
    var fr = client.Get<EbObjectResponse>(new EbObjectRequest { Id = id });

    if (fr.Data.Count > 0)
    {
        var _form = EbSerializers.ProtoBuf_DeSerialize<EbControlContainer>(fr.Data[0].Bytea);
        html += "<div> <form action='/sample/f' method='post'> <div style='position:absolute; width:100%; top:0px; background-color:#6699bb;height:30px;'>";
        html += string.Format(" <input type='text' style='visibility:hidden;' name='isUpdate' value='false' id='{0}' /><input type='text' style='visibility:hidden;' name='fId' value={1} id='{0}' /><span style='font-size:20px;'>{0}</h3><input type='submit' style='float:right;' value='Save'/></div>", _form.Label, id);

        foreach (EbControl c in _form.Controls)
        {
            html += c.GetHtml();
        }
        html += "</form></div>";
    }
}

@Html.Raw(html)


